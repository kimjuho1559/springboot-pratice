<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="/main.css" rel = "stylesheet">
</head>
<body>
    <div th:replace = "~{nav.html::navbar}"></div>
    <div class = "card" th:each="i: ${items}">
        <img src = "https://placehold.co/300">
        <div>
            <h4>
                <a th:href="@{/detail/{id}(id=${i.id})}" th:text="${i.title}">ë°”ì§€</a>
            </h4>
            <p th:text = "${i.price+'ì›'}">7ì–µ</p>
            <p th:text = "${i.username}">ìµëª…</p>
            <a th:href="@{/edit/{id}(id=${i.id})}">âœï¸</a>
            <span class="delete-btn" th:data-id="${i.id}">ğŸ—‘ï¸</span>
        </div>
    </div>
    <button class = "btn">ë²„íŠ¼</button>
    <script>
            document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    let id = this.getAttribute('data-id');
                    fetch(`/delete?id=${id}`, {method: 'DELETE'})
                        .then(response => response.ok ? location.reload() : alert('ì‚­ì œ ì‹¤íŒ¨'))
                        .catch(err => console.error(err));
                });
            });
        });
    document.querySelectorAll(".btn")[0].addEventListener("click", function(){
    fetch("/test1", {
    method : 'POST',
    headers : { 'Content-Type' : 'application/json' },
    body : JSON.stringify({name : "kim"})//'ì „ì†¡í• ë°ì´í„°' array, object ë„ ê°€ëŠ¥
    })
    })
    /* ë„ˆë¬´ í•˜ì°®ì€ ë°ì´í„°ë¼ë©´? ë‹¨ì : ì •ë³´ê°€ ë…¸ì¶œë¨
    document.querySelectorAll(".btn")[0].addEventListener("click", function(){
    fetch("/test1?ì´ë¦„=ê°’&ë‚˜ì´=ê°’")
            })
            */
    </script>
</body>
</html>